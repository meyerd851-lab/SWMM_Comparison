:root { --blue:#2b579a; --gray:#7f8c8d; --green:#2ecc71; --red:#e74c3c; --orange:#f39c12;}
* { box-sizing: border-box; }
html, body { height: 100%; }
body { font-family: Segoe UI, system-ui, sans-serif; margin:0; color:#222; }
header { padding:10px 14px; background:#f6f6f6; border-bottom:1px solid #e3e3e3; }
h1 { margin:0; font-size:18px; color:var(--blue); }
#bar { display:flex; gap:10px; padding:10px 14px; align-items:center; flex-wrap:wrap; }
input[type=file]{ padding:6px; border:1px solid #ddd; border-radius:6px; background:#fff;}
button { padding:8px 12px; border-radius:8px; border:1px solid #d0d0d0; background:#fff; cursor:pointer;}
button.primary{ background:var(--blue); color:#fff; border-color:var(--blue);}
#wrap { display:grid; grid-template-columns: 340px 1fr; gap:12px; padding:12px; height: calc(100vh - 112px); min-height:0; }

.diff { background:#fff6e6; border:1px solid #ffe0a8; border-radius:4px; padding:1px 4px; }
.arrow { opacity:0.75; }
.removedCell { color:#a52222; }
.addedCell { color:#1e7b3a; }

#left { display:grid; grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap:12px; min-height:0; }
.panel { border:1px solid #e1e1e1; border-radius:8px; background:#fff; padding:10px; min-height:0; display:flex; flex-direction:column; }
.panel h3 { margin:0 0 8px 0; font-size:14px; color:#333; }
#summaryPanel, #sectionsPanel { overflow:auto; }
#summary, #sections { overflow:auto; min-height:0; }
#sections .sec { padding:6px 8px; border-radius:6px; cursor:pointer; display:flex; justify-content:space-between; align-items:center; }
.sec:hover { background:#f6f6f9; }
.sec.active { background:#eef3ff; border:1px solid #d9e3ff; }
.counts { color:#666; font-size:12px; }

#right { display:flex; flex-direction:column; min-height:0; }
#filters { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
#search { flex:1; min-width:140px; padding:6px 8px; border:1px solid #ddd; border-radius:6px; }
#detailsWrap { display:flex; gap:12px; min-height:0; }
#tableWrap { flex:1; min-width:0; min-height:0; }
#map { width:45%; min-width:360px; min-height:0; border:1px solid #e1e1e1; border-radius:8px; }

#table { width:100%; border-collapse: collapse; font-size:13px; }
#table th, #table td { border:1px solid #eee; padding:6px 8px; text-align:left; vertical-align:top; }
#table th { background:#fafafa; position: sticky; top: 0; z-index:1; }
#tableContainer { overflow:auto; height:100%; border:1px solid #e1e1e1; border-radius:8px; }

.chip{display:inline-block;width:10px;height:10px;border-radius:2px;margin-right:6px;vertical-align:middle;}
.legend{position:absolute; bottom:12px; left:12px; background:#fff; padding:8px 10px; border:1px solid #ccc; border-radius:6px; font-size:12px;}
.pill { padding:2px 6px; border-radius:999px; font-size:12px; font-weight:600; }
.pill.added { background:#eaf7ef; color:#1e7b3a; border:1px solid #cdeed6; }
.pill.removed { background:#fdeaea; color:#a52222; border:1px solid #f7c7c7; }
.pill.changed { background:#fff6e6; color:#935c00; border:1px solid #ffe0a8; }
.row { cursor:pointer; }
.row:hover { background:#f6f9ff; }
#status { color:#666; }

#modalBackdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:9999;}
#modal{background:#fff;border-radius:10px;border:1px solid #ddd;max-width:900px;width:90vw;max-height:80vh;display:flex;flex-direction:column;}
#modal header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #eee}
#modal h2{margin:0;font-size:16px}
#modal .body{padding:10px 14px;overflow:auto}
#modal .foot{display:flex;gap:8px;justify-content:flex-end;padding:10px 14px;border-top:1px solid #eee}
.cell-changed{background:#fff6e6;border:1px solid #ffe0a8;border-radius:6px;padding:2px 4px}
.kv{display:grid;grid-template-columns:200px 1fr 1fr;gap:6px;align-items:start}
.kv div{padding:6px 8px;border-bottom:1px solid #f2f2f2}
.kv .hdr{font-weight:600;background:#fafafa}
.tag{display:inline-block;background:#eef3ff;border:1px solid #d9e3ff;color:#2b579a;border-radius:999px;padding:2px 8px;font-size:12px}

/* Hydrograph modal table polish */
table.modal-hydro { width:100%; border-collapse:separate; border-spacing:0; }
table.modal-hydro thead th {
  background:#fafafa; border-bottom:1px solid #eee; padding:8px 10px; text-align:left;
  position:sticky; top:0; z-index:1;
}
table.modal-hydro tbody td { padding:6px 10px; border-top:1px solid #f4f4f4; }
table.modal-hydro tbody tr:nth-child(odd) { background:#fcfcfe; }
table.modal-hydro .resp { font-weight:600; white-space:nowrap; }
table.modal-hydro .num { font-variant-numeric: tabular-nums; text-align:right; display:inline-block; min-width:3ch; }
table.modal-hydro .delta {
  display:inline-flex; align-items:center; gap:6px;
  background:#fff6e6; border:1px solid #ffe0a8; border-radius:8px; padding:2px 6px;
  font-variant-numeric: tabular-nums;
}
table.modal-hydro .old { opacity:.75; text-decoration:line-through; }
table.modal-hydro .arrow { opacity:.6; }
table.modal-hydro .diff { font-weight:600; }
table.modal-hydro .plusminus { opacity:.7; }

